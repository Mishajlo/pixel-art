import{G as U,r as h,H as m,A as k,I as M,B as w}from"./index-DYgGcjCx.js";const S="pixels",y="naslov",N="idSlike",R=U("pixels",()=>{const a=h(JSON.parse(localStorage.getItem(S)||"[]")),f=h(Number(JSON.parse(localStorage.getItem(S)||"[]").length)||10),n=h(JSON.parse(localStorage.getItem(y)||JSON.stringify("New Image")||"New Image")),v=h(JSON.parse(localStorage.getItem(N)||JSON.stringify(null)||"")),i=h({korisnik:"",naziv:"New Image",idKorisnika:"",idSlike:"",pikseli:[]}),I=h(!1),s=h({show:!1,text:""}),r=h({show:!1,text:""}),b=m(()=>a.value),C=m(()=>I),D=m(()=>f.value),O=m(()=>n),B=m(()=>i.value),z=m(()=>s),E=m(()=>r);function x(){localStorage.setItem(S,JSON.stringify(a.value))}function d(){localStorage.setItem(y,JSON.stringify(n.value))}function j(){localStorage.setItem(N,JSON.stringify(v.value))}k(a.value,()=>{x()});function J(e,t){if(i.value.idSlike!==""){a.value=i.value.pikseli,console.log(a.value);return}if(e[0]===void 0)for(let l=0;l<f.value;l++){e[l]=[];for(let u=0;u<f.value;u++)e[l][u]={idi:l,idj:u,boja:"#D5C1E7",border:1}}console.log(e)}function T(e){if(i.value.idSlike!==""){console.log(i.value.pikseli.length),a.value=i.value.pikseli,e===i.value.idKorisnika&&(d(),x(),j(),console.log(v.value),k(a.value,()=>{x()})),f.value=i.value.pikseli.length;return}if(f.value>24&&(f.value=24),a.value[0]===void 0)for(let t=0;t<f.value;t++){a.value[t]=[];for(let l=0;l<f.value;l++)a.value[t][l]={idi:t,idj:l,boja:"#D5C1E7",border:1}}d(),j(),console.log(v.value)}function A(e){e>=24&&(e=24,r.value.show=!0,r.value.text="24 is the max!!!"),f.value=e;for(let t=0;t<a.value.length;t++){t==e&&a.value.splice(t,a.value.length-e);for(let l=0;l<a.value.length;l++)l==e&&a.value[t].splice(l,a.value[t].length-e)}for(let t=0;t<e;t++){a.value[t]==null&&(a.value[t]=[]);for(let l=0;l<e;l++)a.value[t][l]==null&&(a.value[t][l]={idi:t,idj:l,boja:"#D5C1E7",border:1})}}function $(e,t,l,u,c){u&&(l?a.value[e][t].boja="#D5C1E7":a.value[e][t].boja=c)}function Y(){for(let e=0;e<a.value.length;e++)for(let t=0;t<a.value.length;t++)a.value[e][t].boja="#D5C1E7";v.value="",n.value="New Image",d(),j(),s.value.show=!0,s.value.text="Reset!"}function G(e,t,l,u,c){if(u?a.value[e][t].boja="#D5C1E7":a.value[e][t].boja=l,c)for(let g=0;g<a.value.length;g++)for(let o=0;o<a.value.length;o++)a.value[g][o].boja=l}function H(e){i.value.idKorisnika=e.idKorisnika,i.value.idSlike=e.idSlike,v.value=e.idSlike,i.value.korisnik=e.korisnik,i.value.naziv=e.naziv,n.value=e.naziv,i.value.pikseli=e.pikseli,console.log(e.idSlike),s.value.show=!0,s.value.text="You are now watching: "+e.naziv+" Drawn By: "+e.korisnik,M.push("/draw")}async function K(e,t,l){if(console.log("Korisnik: "+t),console.log(" Token: "+l),(t!==""||t!==void 0)&&l!=="")try{const u=[];for(let o=0;o<a.value.length;o++)u[o]=[];for(let o=0;o<a.value.length;o++)for(let p=0;p<a.value.length;p++)u[p][o]=a.value[o][p].boja;const c={name:e,picture_data:u},g={headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}};if(v.value===""){const o=await w.post("https://raf-pixeldraw.aarsen.me/api/pictures/",c,g);n.value=e,d(),console.log(o),s.value.show=!0,s.value.text="Upload Successful!"}else if(v.value!=="")if(i.value.idKorisnika===""){console.log("Nema id!");const o=await w.post("https://raf-pixeldraw.aarsen.me/api/pictures/",c,g);n.value=e,d(),console.log(o),s.value.show=!0,s.value.text="Dont Copy Next Time!"}else if(i.value.idKorisnika===t){console.log("Ima Id");const o=await w.post("https://raf-pixeldraw.aarsen.me/api/pictures/",c,g);n.value=e,d(),console.log(o),s.value.show=!0,s.value.text="Dont Copy Next Time!"}else{console.log("Alo Svetlana!"),r.value.show=!0,r.value.text="Dont Dekrati!";return}}catch(u){console.log(u),r.value.show=!0,r.value.text="Error"}else r.value.show=!0,r.value.text="You are not mogged in!",console.log("You are not mogged in!")}async function F(e,t,l){if((t!==""||t!==void 0)&&l!=="")try{const u=[];for(let o=0;o<a.value.length;o++)u[o]=[];for(let o=0;o<a.value.length;o++)for(let p=0;p<a.value.length;p++)u[p][o]=a.value[o][p].boja;const c={name:e,picture_data:u},g={headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`}};if(v.value==="")console.log("Try Saving First! :)"),r.value.show=!0,r.value.text="Try Saving First! :)";else if(v.value!=="")if(i.value.idKorisnika===""){const o=await w.patch(`https://raf-pixeldraw.aarsen.me/api/pictures/${v.value}`,c,g);n.value=e,d(),console.log(o),s.value.show=!0,s.value.text=n.value+" Has Been Updated!"}else if(i.value.idKorisnika===t){const o=await w.patch(`https://raf-pixeldraw.aarsen.me/api/pictures/${i.value.idSlike}`,c,g);n.value=e,d(),console.log(o),s.value.show=!0,s.value.text=n.value+" Has Been Updated!"}else console.log("Alo Svetlana!"),r.value.show=!0,r.value.text="Others Are Not Ours To Change"}catch(u){console.log(u),r.value.show=!0,r.value.text="Error"}else console.log("You are not mogged in!"),r.value.show=!0,r.value.text="You are not mogged in!"}async function P(e,t){try{const l={headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}},u=await w.delete(`https://raf-pixeldraw.aarsen.me/api/pictures/${e}`,l);s.value.show=!0,s.value.text=n.value+" Has Been Deleted!",console.log(u)}catch(l){r.value.show=!0,r.value.text="Error",console.log(l)}}return{getPixels:b,getBroj:D,getSlika:B,getObrisi:C,getSuccessNotif:z,getFailNotif:E,primiSliku:H,matrixGrid:J,promeniBoju:G,getNaslov:O,reset:Y,prevuciBoju:$,promeniGrid:A,matrixGriddy:T,saveImage:K,updateImage:F,deleteImage:P}});export{R as u};
